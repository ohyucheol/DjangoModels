# A01. 금칙어
## 설계의 요지
### 1. username으로 사용할 수 있는 문자를 제한한 사례
Django에서는 기본 User 모델의 username으로 150자 이내의 문자, 아라비아 숫자, \_, @, +, ., -를 사용할 수 있다. 문자는 로마자로 제한되지 않으므로 이용자는 한글 등을 username으로 사용할 수 있다. 이때 username의 검증(validation)이 문제된다. 이 사례에서는 각 이용자가 자신의 username을 url로 하는 개인 페이지를 가진다는 점, 각 문자 또는 언어별로 금칙어를 수집·처리하는데에는 과도한 비용이 발생한다는 점을 고려하여 username으로 사용할 수 있는 문자를 로마자와 아라비아 숫자로 제한하였다.
### 2. 소수의 특정 단어를 username의 전부 또는 일부로 사용할 수 없는 사례
username의 전부 또는 일부가 금칙어에 해당하는지를 판단하기 위해서는 이용자가 입력한 username을 수집·처리한 모든 금칙어와 비교하여야 한다. 이때 비교작업의 시간복잡도가 문제된다. 이 사례에서는 username으로 사용할 수 있는 문자를 로마자와 아라비아 숫자로 제한하고 있다는 점, 금칙어가 경업관계에 있는 다른 그룹의 명칭 또는 가수의 이름 등으로 그 수가 비교적 적다는 점, 가입 이후에도 서비스 제공자가 이용자의 username을 변경할 수 있다는 점을 고려하여 금칙어를 json 파일에 배열로 저장하고 Django에서 그 값을 username과 비교하였다.
### 3. 각 이용자간 상호작용을 위한 도구로 username을 사용한 사례
서비스 체류시간을 높이기 위하여 댓글, 채팅, 쪽지 등 이용자간 상호작용을 위한 기능을 도입할 수 있다. 이때 이용자의 특정과 상호작용 방법이 문제된다. 이 사례에서는 username은 서비스 내에서 유일하다는 점, 각 이용자가 다른 이용자의 이메일·SNS 등을 알 수 없게 함으로써 서비스 내에서만 상호작용하도록 유도할 필요가 있다는 점을 고려하여 username을 각 이용자간 상호작용을 위한 도구로 사용하였다.

## 설계의 기준
### 기본 시나리오
연예기획사 甲은 인기 아이돌 그룹 A, B와 전속계약을 체결하였다. A 그룹의 멤버는 alfa, bravo, charlie 이고, B 그룹의 멤버는 delta, echo, foxtrot, golf, hotel이다. 甲은 소속 그룹의 팬들을 위하여 웹 서비스를 제공하고자 한다. 서비스의 회원가입과 관련한 甲의 요구사항은 다음과 같다.
1. 가입시 각 이용자마다 example.com/**username**과 같이 자신의 username을 url로 하는 개인 페이지를 할당한다.
2. 이용자는 example.com/bigfanof**A**, example.com/ilove**charlie**와 같이 甲에 소속된 그룹의 명칭 또는 가수의 이름을 자신의 username에 포함할 수 있다.
3. 이용자는 example.com/**B**, example.com/**delta**과 같이 甲에 소속된 그룹의 명칭 또는 가수의 이름만으로 된 username으로 가입할 수 없다.
4. 이용자는 example.com/**official**foxtrot과 같이 다른 이용자가 그 이용자를 甲 또는 甲의 직원이라고 혼동할 수 있는 단어를 username에 포함할 수 없다.
5. 이용자는 example.com/golf**sucks**와 같이 甲에 소속된 그룹 또는 가수의 명성을 손상시킬 수 있거나 공서양속에 반하는 단어를 username에 포함할 수 없다.
6. 이용자는 example.com/**Z**, example.com/**yankee**과 같이 甲과 경업관계에 있는 연예기획사 乙에 소속된 그룹의 명칭 또는 가수의 이름을 username에 포함할 수 없다.
7. 甲은 username의 전부 또는 일부로 사용할 수 없는 단어를 추가, 삭제, 변경할 수 있다.
8. 甲은 부적절한 username을 사용하는 이용자에게 username의 변경을 요청할 수 있으며 상당한 기간이 지난 후에도 username을 변경하지 않는 경우 그 username을 url로 하는 개인 페이지로의 접속을 차단할 수 있다.

### 법률, 시행령, 시행규칙 등
1. **상표법 제2조(정의)제1항제11호, 제2항**
* ① 이 법에서 사용하는 용어의 뜻은 다음과 같다.
	* 11호. "상표의 사용"이란 다음 각 목의 어느 하나에 해당하는 행위를 말한다.
		* 가. 상품 또는 상품의 포장에 상표를 표시하는 행위
		* 나. 상품 또는 상품의 포장에 상표를 표시한 것을 양도ㆍ인도하거나 전기통신회선을 통하여 제공하는 행위 또는 이를 목적으로 전시하거나 수출ㆍ수입하는 행위
		* 다. 상품에 관한 광고ㆍ정가표(定價表)ㆍ거래서류, 그 밖의 수단에 상표를 표시하고 전시하거나 널리 알리는 행위
* ② 제1항제11호 각 목에 따른 상표를 표시하는 행위에는 다음 각 호의 어느 하나의 방법으로 표시하는 행위가 포함된다.
	* 1호. 표장의 형상이나 소리 또는 냄새로 상표를 표시하는 행위
	* 2호. 전기통신회선을 통하여 제공되는 정보에 전자적 방법으로 표시하는 행위

2. **상표법 제89조(상표권의 효력)**
* 상표권자는 지정상품에 관하여 그 등록상표를 사용할 권리를 독점한다. 다만, 그 상표권에 관하여 전용사용권을 설정한 때에는 제95조제3항에 따라 전용사용권자가 등록상표를 사용할 권리를 독점하는 범위에서는 그러하지 아니하다.

3. **상표법 제107조(권리침해에 대한 금지청구권 등)**
* ① 상표권자 또는 전용사용권자는 자기의 권리를 침해한 자 또는 침해할 우려가 있는 자에 대하여 그 침해의 금지 또는 예방을 청구할 수 있다.
* ② 상표권자 또는 전용사용권자가 제1항에 따른 청구를 할 경우에는 침해행위를 조성한 물건의 폐기, 침해행위에 제공된 설비의 제거나 그 밖에 필요한 조치를 청구할 수 있다.
* ③ 제1항에 따른 침해의 금지 또는 예방을 청구하는 소가 제기된 경우 법원은 원고 또는 고소인(이 법에 따른 공소가 제기된 경우만 해당한다)의 신청에 의하여 임시로 침해행위의 금지, 침해행위에 사용된 물건 등의 압류나 그 밖에 필요한 조치를 명할 수 있다. 이 경우 법원은 원고 또는 고소인에게 담보를 제공하게 할 수 있다.

4. **상표법 제108조(침해로 보는 행위)**
* ① 다음 각 호의 어느 하나에 해당하는 행위는 상표권(지리적 표시 단체표장권은 제외한다) 또는 전용사용권을 침해한 것으로 본다.
	* 1호. 타인의 등록상표와 동일한 상표를 그 지정상품과 유사한 상품에 사용하거나 타인의 등록상표와 유사한 상표를 그 지정상품과 동일ㆍ유사한 상품에 사용하는 행위
	* 2호. 타인의 등록상표와 동일ㆍ유사한 상표를 그 지정상품과 동일ㆍ유사한 상품에 사용하거나 사용하게 할 목적으로 교부ㆍ판매ㆍ위조ㆍ모조 또는 소지하는 행위
	* 3호. 타인의 등록상표를 위조 또는 모조하거나 위조 또는 모조하게 할 목적으로 그 용구를 제작ㆍ교부ㆍ판매 또는 소지하는 행위
	* 4호. 타인의 등록상표 또는 이와 유사한 상표가 표시된 지정상품과 동일ㆍ유사한 상품을 양도 또는 인도하기 위하여 소지하는 행위
* ② 다음 각 호의 어느 하나에 해당하는 행위는 지리적 표시 단체표장권을 침해한 것으로 본다.
	* 1호. 타인의 지리적 표시 등록단체표장과 유사한 상표(동음이의어 지리적 표시는 제외한다. 이하 이 항에서 같다)를 그 지정상품과 동일하다고 인정되는 상품에 사용하는 행위
	* 2호. 타인의 지리적 표시 등록단체표장과 동일ㆍ유사한 상표를 그 지정상품과 동일하다고 인정되는 상품에 사용하거나 사용하게 할 목적으로 교부ㆍ판매ㆍ위조ㆍ모조 또는 소지하는 행위
	* 3호. 타인의 지리적 표시 등록단체표장을 위조 또는 모조하거나 위조 또는 모조하게 할 목적으로 그 용구를 제작ㆍ교부ㆍ판매 또는 소지하는 행위
	* 4호. 타인의 지리적 표시 등록단체표장과 동일ㆍ유사한 상표가 표시된 지정상품과 동일하다고 인정되는 상품을 양도 또는 인도하기 위하여 소지하는 행위

5. **상표법 제109조(손해배상의 청구)**
* 상표권자 또는 전용사용권자는 자기의 상표권 또는 전용사용권을 고의 또는 과실로 침해한 자에 대하여 그 침해에 의하여 자기가 받은 손해의 배상을 청구할 수 있다.

6. **상표법 제230조(침해죄)**
* 상표권 또는 전용사용권의 침해행위를 한 자는 7년 이하의 징역 또는 1억원 이하의 벌금에 처한다.

### (사실상의)표준, 관습, 실무사례, 문헌 등
1. ISO 기본 로마자 및 아라비아 숫자(ISO/IEC 646)
* 정규표현식 ([a-zA-Z0-9])+
2. 네이버쇼핑 스마트스토어
* smartstore.naver.com/**username**
3. 인스타그램
* instagram.com/**username**

## 구현의 대상
### 모델(Model)
1. class User(AbstractUser):
* django.contrib.auth.models의 기본 User 모델을 그대로 사용한다.

### 뷰(View)
1. class About(TemplateView):
2. class CreateUserView(CreateView):
3. class LoginUserView(LoginView):
4. class LogoutUserView(LogoutView):
5. class PersonalUserView(TemplateView):
* 각 이용자의 개인 페이지
6. class UpdateUsernameView(UpdateView):
7. class UpdateEmailView(UpdateView):
8. class UpdatePasswordView(UpdateView):
9. class UpdateBannedKeywordView(FormView):

### 폼(Form)
1. class CreateUserForm(forms.ModelForm):
2. class LoginUserForm(AuthenticationForm):
3. class UpdateUsernameForm(forms.ModelForm):
4. class UpdateEmailForm(forms.ModelForm):
5. class UpdatePasswordForm(forms.ModelForm):
6. class UpdateBannedKeywordForm(forms.Form):
7. class FormDecorator:
* validator, (field)error_message, widget의 관리를 위한 클래스로써 각 Form에서 사용된다.

### 템플릿(Template)
1. base.html
* 다음 2 내지 10호의 템플릿에서 상단 헤더로 사용된다.
2. about.html
3. create-user.html
4. login-user.html
5. personal-user.html
* 각 이용자의 개인페이지
6. nav.html
* 다음 7 내지 10호의 템플릿에서 좌측 사이드바 내비게이션으로 사용된다.
7. update-username.html
8. update-email.html
9. update-password.html
10. update-banned-keyword.html

### 기타
1. banned.json
* 금칙어 목록을 저장한 파일로써 아이디로 사용할 수 없는 단어는 'full', 아이디에 포함할 수 없는 단어는 'part'로 구분하며 다음과 같은 형식으로 구성된다.
```json
{
	"full": ["alfa", "bravo", "charlie"],
	"part": ["delta", "echo", "foxtrot"]
}
```